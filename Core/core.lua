ni = ni or {castdest = %%CastDest%%,secureload = %%SecureLoad%%,functions = {moveto = %%MoveTo%%,clickat = %%ClickAt%%,registercallback = %%RegisterCallback%%,auras = %%Auras%%,require = %%Require%%,getmapid = %%GetMapID%%,bestloc = %%BestLoc%%,combatreach = %%CombatReach%%,objectexists = %%ObjectExists%%,getom = %%GetOM%%,interact = %%Interact%%,item = %%Item%%,inventoryitem = %%InventoryItem%%,objectinfo = %%ObjectInfo%%,isfacing = %%IsFacing%%,isbehind = %%IsBehind%%,hasaura = %%HasAura%%,runtext = %%RunText%%,getdistance = %%GetDistance%%,lookat = %%LookAt%%,unitcreator = %%UnitCreator%%,settarget = %%SetTarget%%,stopmoving = %%StopMoving%%,unitdynamicflags = %%UnitDynamicFlags%%,unitflags = %%UnitFlags%%,creaturetype = %%CreatureType%%,cast = %%Cast%%,getspellid = %%GetSpellID%%,stopcasting = %%StopCasting%%,los = %%LoS%%,objectpointer = %%ObjectPointer%%,baseaddress = %%BaseAddress%%,objecttransport = %%ObjectTransport%%,objectfacing = %%ObjectFacing%%,resetlasthardwareaction = %%ResetLastHardwareAction%%,callprotected = %%CallProtected%%,webrequest = %%WebRequest%%,getrandomnamefor = %%GetRandomNameFor%%,loadcontent = %%LoadContent%%,savecontent = %%SaveContent%%,getbasefolder = %%GetBaseFolder%%,getprofilesfor = %%GetProfilesFor%%,getpath = %%GetPath%%,freemaps = %%FreeMaps%%,getdescriptor = %%GetDescriptor%%,setcreaturetracking = %%SetCreatureTracking%%,setresourcetracking = %%SetResourceTracking%%,readdistance = %%WebRequest%%,open = %%Open%%,read = %%Read%%,toggleconsole = %%ToggleConsole%%,}}if not ni.loaded then local a=CreateFrame("frame")a:SetScript("OnUpdate",function(self)local b=IsLinuxClient()if b then ni.castdest=b;self:Hide()end end)local c={}local function d(...)local e=select('#',...)return setmetatable({...},{__len=function()return e end})end;local function f(g)if not g:find(".lua")and not g:find(".enc")then g=g..".lua"end;if not c[g]then c[g]=d(ni.functions.require(g))end;return unpack(c[g])end;local h=ni.functions.getbasefolder()local i=f(h.."addon\\core\\json.enc")local j=ni.functions.loadcontent(h.."addon\\settings\\"..UnitName("player")..".json")ni.vars=j and i.decode(j)or f(h.."addon\\core\\vars.enc")ni.vars.profiles.enabled=false;ni.vars.profiles.genericenabled=false;ni.vars.profiles.delay=0;ni.functions.savecontent(h.."addon\\settings\\"..UnitName("player")..".json",i.encode(ni.vars))ni.vars.build=select(4,GetBuildInfo())ni.debug=f(h.."addon\\core\\debug.enc")ni.memory=f(h.."addon\\core\\memory.enc")ni.rotation=f(h.."addon\\core\\rotation.enc")ni.bootstrap=f(h.."addon\\core\\bootstrap.enc")ni.tables=f(h.."addon\\core\\tables.enc")ni.drtracker=f(h.."addon\\core\\drtracker.enc")ni.utils=f(h.."addon\\core\\utils.enc")ni.utils.require=f;ni.utils.json=i;local k=f(h.."addon\\core\\mwcrand.enc")ni.strongrand=k;ni.utils.savesetting=function(l,m)if type(m)=="table"then m=i.encode(m)end;ni.functions.savecontent(h.."addon\\Settings\\"..l,m)end;ni.utils.getsettings=function(l)local n=ni.functions.loadcontent(h.."addon\\Settings\\"..l)return n and i.decode(n)or{}end;local o={}local function p(q)local r=""for s=1,q do r=r..string.char(k.generate(97,122))end;return r end;ni.utils.GenerateRandomName=function()local g=p(20)while tContains(o,g)do g=p(20)end;table.insert(o,g)return g end;ni.frames,ni.combatlog,ni.delayfor,ni.icdtracker,ni.events=f(h.."addon\\core\\frames.enc")ni.spell=f(h.."addon\\core\\spell.enc")ni.power=f(h.."addon\\core\\power.enc")ni.rune=f(h.."addon\\core\\rune.enc")ni.unit=f(h.."addon\\core\\unit.enc")ni.player=f(h.."addon\\core\\player.enc")ni.members=f(h.."addon\\core\\members.enc")ni.objects,ni.objectmanager=f(h.."addon\\core\\objectmanager.enc")ni.GUI=f(h.."addon\\core\\gui.enc")ni.main=f(h.."addon\\core\\mainui.enc")ni.showstatus=function(t,u)if u then ni.frames.floatingtext:message("\124cff00ff00"..t)else ni.frames.floatingtext:message("\124cffff0000"..t)end end;ni.toggleprofile=function(t)local v=false;if ni.vars.profiles.active==t then ni.vars.profiles.enabled=not ni.vars.profiles.enabled;if ni.vars.profiles.enabled==false then v=true end else v=true;ni.vars.profiles.enabled=true;ni.vars.profiles.active=t end;if v then if ni.rotation.profile[ni.rotation.lastprofile]then if ni.rotation.profile[ni.rotation.lastprofile].unload then ni.rotation.profile[ni.rotation.lastprofile]:unload()end;if ni.rotation.profile[ni.rotation.lastprofile].destroyGUI then ni.rotation.profile[ni.rotation.lastprofile]:destroyGUI()end end end;if ni.vars.profiles.enabled then if ni.rotation.profile[t]then if ni.rotation.profile[t].load then ni.rotation.profile[t]:load()end;if ni.rotation.profile[t].createGUI then ni.rotation.profile[t]:createGUI()end end end;if ni.rotation.lastprofile~=t then ni.rotation.lastprofile=t end;ni.showstatus(t,ni.vars.profiles.enabled)end;ni.togglegeneric=function(t)local v=false;if ni.vars.profiles.generic==t then ni.vars.profiles.genericenabled=not ni.vars.profiles.genericenabled;if ni.vars.profiles.genericenabled==false then v=true end else v=true;ni.vars.profiles.genericenabled=true;ni.vars.profiles.generic=t end;if v then if ni.rotation.profile[ni.rotation.lastgeneric]then if ni.rotation.profile[ni.rotation.lastgeneric].unload then ni.rotation.profile[ni.rotation.lastgeneric]:unload()end;if ni.rotation.profile[ni.rotation.lastgeneric].destroyGUI then ni.rotation.profile[ni.rotation.lastgeneric]:destroyGUI()end end end;if ni.vars.profiles.genericenabled then if ni.rotation.profile[t]then if ni.rotation.profile[t].load then ni.rotation.profile[t]:load()end;if ni.rotation.profile[t].createGUI then ni.rotation.profile[t]:createGUI()end end end;if ni.rotation.lastgeneric~=t then ni.rotation.lastgeneric=t end;ni.showstatus(t,ni.vars.profiles.genericenabled)end;ni.updatefollow=function(u)if u then ni.frames.floatingtext:message("Auto follow: \124cff00ff00Enabled")else ni.frames.floatingtext:message("Auto follow: \124cffff0000Disabled")end end;ni.getspellidfromactionbar=function()local w=GetMouseFocus():GetName()if string.match(w,"Button")then local x=_G[w]local y=ActionButton_GetPagedID(x)or ActionButton_CalculateAction(x)or x:GetAttribute("action")or 0;if HasAction(y)then local z,A,B,C=GetActionInfo(y)if z=="spell"then return C~=nil and C or A end end end end;ni.functionsregistered=function()return %%ToggleConsole%%~=nil end;ni.frames.main:SetScript("OnUpdate",ni.frames.OnUpdate)ni.frames.main:SetScript("OnEvent",ni.frames.OnEvent)if ni.vars["global"]then _G[ni.vars["global"]]=ni end;ni.loaded=true end